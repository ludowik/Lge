<!DOCTYPE html>
<html>

<head>

    <script src="js/lib/fengari-web.js"></script>
    <script src="js/lib/p5.min.js"></script>

</head>

<body>

    <script type="application/lua" src="js.lua" async></script>
    <script async>
        console.clear();

        var needSetup = true;

        function setup() {
            createCanvas(256, 256 * 16 / 9);
        }

        function draw() {
            if (needSetup) {
                needSetup = false;
                fengari.load('return __setup()')();
            }
            fengari.load('return __draw()')();
        }

        function mousePressed() {
            fengari.load('return mousepressed()')();
        }

        function mouseReleased() {
            fengari.load('return mousereleased()')();
        }
    </script>

</body>

</html>